{% extends "base.html" %}
{% block content %}

<div class="detalle-inmueble">

    <!-- Imagen principal -->
    <div class="carousel">

    <div class="carousel-track">
        {% for img in imagenes %}
            <img src="{{ img }}" class="carousel-slide">
        {% endfor %}
    </div>

    <button class="carousel-btn prev">â€¹</button>
    <button class="carousel-btn next">â€º</button>

</div>

    <!-- TÃ­tulo -->
    <h2>{{ inmueble.titulo }}</h2>
    <p class="ubicacion">{{ inmueble.municipio }}</p>

    <!-- Datos clave -->
    <div class="datos-clave">

        <div class="dato precio">
            {{ inmueble.tipo_negocio }} Â· ${{ "{:,.0f}".format(inmueble.precio) }}
        </div>

        <div class="dato">
            {{ inmueble.tipo }}
        </div>

        {% if inmueble.habitaciones and inmueble.habitaciones > 0 %}
        <div class="dato">
            ğŸ› {{ inmueble.habitaciones }} habitaciones
        </div>
        {% endif %}

        {% if inmueble.banos and inmueble.banos > 0 %}
        <div class="dato">
            ğŸš¿ {{ inmueble.banos }} baÃ±os
        </div>
        {% endif %}

        {% if inmueble.parqueadero %}
        <div class="dato">
            ğŸš— Parqueadero
        </div>
        {% endif %}

    </div>

    <hr class="detalle-separador">

    <!-- DescripciÃ³n -->
    <div class="detalle-descripcion">
        <h4>DescripciÃ³n</h4>
        <p>{{ inmueble.descripcion }}</p>
    </div>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

    const track = document.querySelector(".carousel-track");
    if (!track) return;

    const slides = Array.from(track.children);

    const nextBtn = document.querySelector(".next");
    const prevBtn = document.querySelector(".prev");

    let index = 0;

    function updateCarousel() {
        track.style.transform = `translateX(-${index * 100}%)`;
    }

    /* ---------- FLECHA SIGUIENTE ---------- */
    if (nextBtn) {
        nextBtn.addEventListener("click", () => {
            index = (index + 1) % slides.length;
            updateCarousel();
        });
    }

    /* ---------- FLECHA ANTERIOR ---------- */
    if (prevBtn) {
        prevBtn.addEventListener("click", () => {
            index = index === 0 ? slides.length - 1 : index - 1;
            updateCarousel();
        });
    }

    /* ---------- SWIPE TOUCH ---------- */
    let startX = 0;
    let currentX = 0;
    let isDragging = false;

    track.addEventListener("touchstart", (e) => {
        startX = e.touches[0].clientX;
        isDragging = true;
    });

    track.addEventListener("touchmove", (e) => {
        if (!isDragging) return;
        currentX = e.touches[0].clientX;
    });

    track.addEventListener("touchend", () => {
        if (!isDragging) return;

        let diff = startX - currentX;

        if (diff > 50) {
            index = (index + 1) % slides.length;
        }

        if (diff < -50) {
            index = index === 0 ? slides.length - 1 : index - 1;
        }

        updateCarousel();
        isDragging = false;
    });

});
</script>





{% endblock %}
