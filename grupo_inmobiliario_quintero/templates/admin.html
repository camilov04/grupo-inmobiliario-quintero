{% extends "base.html" %}

{% block content %}
<h2>Panel de Administraci√≥n</h2>
<a href="{{ url_for('logout') }}" class="btn-delete" style="float:right;">Cerrar sesi√≥n</a>

<!-- FORMULARIO AGREGAR INMUEBLE -->
<h3>Agregar nuevo inmueble</h3>
<form method="POST" action="{{ url_for('agregar_inmueble') }}">
    <label for="tipo">Tipo de inmueble:</label>
    <select name="tipo" id="tipo" required>
        <option value=""> </option>
        <option value="Apartamento">Apartamento</option>
        <option value="Casa">Casa</option>
        <option value="Local">Local</option>
        <option value="Lote">Lote</option>
        <option value="Oficina">Oficina</option>
    </select><br>

    <label>Municipio:</label>
    <input type="text" name="municipio" required><br>

    <label>Habitaciones:</label>
    <input type="number" name="habitaciones" min="1" required><br>

    <label>Valor:</label>
    <input type="number" name="valor" min="0" required><br>

    <label>URL de la imagen:</label>
    <input type="text" name="imagen" placeholder="https://..." required><br>

    <button type="submit">Agregar inmueble</button>
</form>

<hr>

<!-- TABLA DE INMUEBLES -->
<h3>Lista de inmuebles</h3>
<table border="1">
    <tr>
        <th>ID</th>
        <th>Tipo</th>
        <th>Municipio</th>
        <th>Habitaciones</th>
        <th>Valor</th>
        <th>Imagen</th>
        <th>Acciones</th>
    </tr>
    {% for i in inmuebles %}
    <tr>
        <td>{{ i.id }}</td>
        <td>{{ i.tipo }}</td>
        <td>{{ i.municipio }}</td>
        <td>{{ i.habitaciones }}</td>
        <td>${{ i.valor }}</td>
        <td>
            {% if i.imagen %}
                <img src="{{ i.imagen }}" width="100">
            {% else %}
                No hay imagen
            {% endif %}
        </td>
        <td>
            <!-- EDITAR -->
            <a href="{{ url_for('editar_inmueble', id=i.id) }}">‚úèÔ∏è Editar</a>
            
            <!-- ELIMINAR -->
            <form action="{{ url_for('eliminar_inmueble', id=i.id) }}" method="POST" style="display:inline;">
                <button type="submit">üóëÔ∏è Eliminar</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}