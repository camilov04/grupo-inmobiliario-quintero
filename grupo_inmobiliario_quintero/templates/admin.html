{% extends "base.html" %}
{% block content %}
<h2>Panel de Administración</h2>

<form method="POST">
    <label>Tipo:</label>
    <select name="tipo" required>
        <option value="Casa">Casa</option>
        <option value="Apartamento">Apartamento</option>
    </select><br>

    <label>Municipio:</label>
    <input type="text" name="municipio" required><br>

    <label>Habitaciones:</label>
    <input type="number" name="habitaciones" min="1" required><br>

    <label>Valor:</label>
    <input type="number" name="valor" min="0" required><br>

    <label>URL de la imagen:</label>
    <input type="text" name="imagen_url" placeholder="https://..." required><br>

    <button type="submit">Agregar inmueble</button>
</form>

<hr>

<h3>Lista actual de inmuebles</h3>
<ul>
    {% for inmueble in inmuebles %}
        <li>
            <strong>{{ inmueble.tipo }}</strong> en {{ inmueble.municipio }} - ${{ inmueble.valor }}
            <br>
            <img src="{{ inmueble.imagen_url }}" alt="Imagen" width="150">
        </li>
    {% endfor %}
</ul>
<h2>Lista de inmuebles</h2>
<table border="1">
    <tr>
        <th>ID</th>
        <th>Tipo</th>
        <th>Municipio</th>
        <th>Habitaciones</th>
        <th>Valor</th>
        <th>Imagen</th>
        <th>Acciones</th>
    </tr>
    {% for i in inmuebles %}
    <tr>
        <td>{{ i.id }}</td>
        <td>{{ i.tipo }}</td>
        <td>{{ i.municipio }}</td>
        <td>{{ i.habitaciones }}</td>
        <td>${{ i.valor }}</td>
        <td><img src="{{ i.imagen_url }}" width="100"></td>
        <td>
            <a href="{{ url_for('editar_inmueble', id=loop.index0) }}">✏️ Editar</a>
            <form action="{{ url_for('eliminar', id=loop.index0) }}" method="POST" style="display:inline;">
                <button type="submit">Eliminar</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}