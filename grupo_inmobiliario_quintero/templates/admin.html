{% extends "base.html" %}

{% block content %}
<h2>Panel de Administraci√≥n</h2>
<a href="{{ url_for('logout') }}" class="btn-delete" style="float:right;">Cerrar sesi√≥n</a>

<!-- FORMULARIO AGREGAR INMUEBLE -->
<h2>Agregar inmueble</h2>
<form method="POST" action="{{ url_for('agregar_inmueble') }}">
    <label>T√≠tulo:</label>
    <input type="text" name="titulo" required><br>

    <label>Descripci√≥n:</label>
    <textarea name="descripcion" required></textarea><br>

    <label>Tipo de inmueble:</label>
    <select name="tipo" required>
        <option value="">Seleccionar</option>
        <option value="Apartamento">Apartamento</option>
        <option value="Casa">Casa</option>
        <option value="Local">Local</option>
        <option value="Lote">Lote</option>
        <option value="Oficina">Oficina</option>
    </select><br>

    <label>Municipio:</label>
    <input type="text" name="municipio" required><br>

    <label>Habitaciones:</label>
    <input type="number" name="habitaciones" required><br>

    <label>Precio:</label>
    <input type="number" name="precio" required><br>

    <label>Imagen URL:</label>
    <input type="text" name="imagen_url"><br>

    <button type="submit">Agregar</button>
</form>

<hr>

<!-- TABLA DE INMUEBLES -->
<h3>Lista de inmuebles</h3>
<table border="1">
    <tr>
        <th>ID</th>
        <th>T√≠tulo</th>
        <th>Descripci√≥n</th>
        <th>Tipo</th>
        <th>Municipio</th>
        <th>Habitaciones</th>
        <th>Precio</th>
        <th>Imagen</th>
        <th>Acciones</th>
    </tr>
    {% for i in inmuebles %}
    <tr>
        <td>{{ i.id }}</td>
        <td>{{ i.titulo }}</td>
        <td>{{ i.descripcion }}</td>
        <td>{{ i.tipo }}</td>
        <td>{{ i.municipio }}</td>
        <td>{{ i.habitaciones }}</td>
        <td>${{ i.precio }}</td>
        <td>
            {% if i.imagen_url %}
                <img src="{{ i.imagen_url }}" width="100">
            {% endif %}
        </td>
        <td>
            <!-- EDITAR -->
            <a href="{{ url_for('editar_inmueble', id=i.id) }}">‚úèÔ∏è Editar</a>
            
            <!-- ELIMINAR -->
            <form action="{{ url_for('eliminar_inmueble', id=i.id) }}" method="POST" style="display:inline;">
                <button type="submit">üóëÔ∏è Eliminar</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}